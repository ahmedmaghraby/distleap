(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1524cf6d"],{"2ee3":function(e,t,a){var n,o;(function(i,s){if(null===i)throw new Error("Google-maps package can be used only in browser");n=s,o="function"===typeof n?n.call(t,a,t,e):n,void 0===o||(e.exports=o)})("undefined"!==typeof window?window:null,(function(){"use strict";var e="3.31",t=null,a=null,n=!1,o=[],i=[],s=null,r={URL:"https://maps.googleapis.com/maps/api/js",KEY:null,LIBRARIES:[],CLIENT:null,CHANNEL:null,LANGUAGE:null,REGION:null};r.VERSION=e,r.WINDOW_CALLBACK_NAME="__google_maps_api_provider_initializator__",r._googleMockApiObject={},r.load=function(e){null===a?!0===n?e&&o.push(e):(n=!0,window[r.WINDOW_CALLBACK_NAME]=function(){l(e)},r.createLoader()):e&&e(a)},r.createLoader=function(){t=document.createElement("script"),t.type="text/javascript",t.src=r.createUrl(),document.body.appendChild(t)},r.isLoaded=function(){return null!==a},r.createUrl=function(){var e=r.URL;return e+="?callback="+r.WINDOW_CALLBACK_NAME,r.KEY&&(e+="&key="+r.KEY),r.LIBRARIES.length>0&&(e+="&libraries="+r.LIBRARIES.join(",")),r.CLIENT&&(e+="&client="+r.CLIENT),r.CHANNEL&&(e+="&channel="+r.CHANNEL),r.LANGUAGE&&(e+="&language="+r.LANGUAGE),r.REGION&&(e+="&region="+r.REGION),r.VERSION&&(e+="&v="+r.VERSION),e},r.release=function(l){var c=function(){r.KEY=null,r.LIBRARIES=[],r.CLIENT=null,r.CHANNEL=null,r.LANGUAGE=null,r.REGION=null,r.VERSION=e,a=null,n=!1,o=[],i=[],"undefined"!==typeof window.google&&delete window.google,"undefined"!==typeof window[r.WINDOW_CALLBACK_NAME]&&delete window[r.WINDOW_CALLBACK_NAME],null!==s&&(r.createLoader=s,s=null),null!==t&&(t.parentElement.removeChild(t),t=null),l&&l()};n?r.load((function(){c()})):c()},r.onLoad=function(e){i.push(e)},r.makeMock=function(){s=r.createLoader,r.createLoader=function(){window.google=r._googleMockApiObject,window[r.WINDOW_CALLBACK_NAME]()}};var l=function(e){var t;for(n=!1,null===a&&(a=window.google),t=0;t<i.length;t++)i[t](a);for(e&&e(a),t=0;t<o.length;t++)o[t](a);o=[]};return r}))},"70a2":function(e,t,a){"use strict";a("ca90")},ca90:function(e,t,a){},f96f:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"google-maps-page"},[a("div",{staticClass:"row"},[a("div",{staticClass:"flex md12 xs12"},[a("va-card",{staticClass:"google-maps-page__widget",attrs:{title:e.$t("generic.Traf")+(e.time?e.$t("generic.after")+e.time:e.$t("generic.Now"))}},[a("google-map",{staticStyle:{height:"73vh"},attrs:{time:e.time}})],1)],1)])])},o=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row mr-0"},[a("div",{staticClass:"row flex xs12 sm6 align--center"},[a("div",{staticClass:" flex md6 sm12 xs12 px-1 text-start"},[a("label",{staticClass:"input-label"},[e._v(" "+e._s(e.$t("placeholder.ChooseRoute"))+" ")]),a("va-select-c",{attrs:{searchable:"",textBy:"RouteName",keyBy:"id",options:e.routsSelect.options},model:{value:e.routsSelect.value,callback:function(t){e.$set(e.routsSelect,"value",t)},expression:"routsSelect.value"}})],1),a("div",{staticClass:"flex md6 sm12 mt-4 xs12 px-1 text-start"},[a("va-checkbox",{attrs:{label:e.$t("placeholder.showTrafic")},model:{value:e.showTrafic,callback:function(t){e.showTrafic=t},expression:"showTrafic"}})],1)])]),a("div",{ref:"googleMap",staticClass:"google-map map-fill-height"}),a("va-modal",{attrs:{"no-outside-dismiss":"",fullscreen:"","hide-default-actions":"",title:e.$t("generic.Detailes")+" "+e.routeName,cancelText:e.$t("modal.cancel")},model:{value:e.createModal,callback:function(t){e.createModal=t},expression:"createModal"}},[e.loading?a("div",{staticClass:"flex-center spinner-box"},[a("SpringSpinner",{attrs:{"animation-duration":1500,color:this.$themes.primary,size:80}})],1):a("div",[a("div",{staticClass:"row justify--space-between"},[a("span",[e._v("الوقت المتوقع "),a("span",[e._v(e._s(e.expextedTime))])]),a("span",[e._v("المسافة"),a("span",[e._v(e._s(e.distance))])]),a("span",[e._v("الوقت الان "),a("span",[e._v(e._s(e.timeNow))])])]),a("div",{staticClass:"row flex-center"},[a("div",{ref:"googleMapDetails",staticClass:"google-map  fill-height",staticStyle:{height:"69vh"},attrs:{id:"map"}}),a("div",{attrs:{id:"sidebar"}},[a("div",{attrs:{id:"panel"}})])]),a("div",{staticClass:"d-flex justify--center mt-3"},[a("va-button",{attrs:{type:"button",color:"gray",flat:""},on:{click:function(t){e.createModal=!1}}},[e._v(" "+e._s(e.$t("modal.cancel"))+" ")])],1)])])],1)},s=[],r=a("a34a"),l=a.n(r),c=a("2ee3"),p=a("2591"),u=a("4583"),m=a("bc3a"),d=a.n(m);function g(e,t,a,n,o,i,s){try{var r=e[i](s),l=r.value}catch(c){return void a(c)}r.done?t(l):Promise.resolve(l).then(n,o)}function f(e){return function(){var t=this,a=arguments;return new Promise((function(n,o){var i=e.apply(t,a);function s(e){g(i,n,o,s,r,"next",e)}function r(e){g(i,n,o,s,r,"throw",e)}s(void 0)}))}}function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){w(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var L={name:"google-map",data:function(){return{routeName:"",timeNow:"",distance:"",expextedTime:"",routes:[],routsSelect:{value:"",options:[]},departureTime:null,iconPr:"https://i.ibb.co/zScnP9L/IconPr.gif",iconSc:"https://i.ibb.co/4t5K1jd/IconSec.gif",loading:!0,createModal:!1,googleMap:null,smap:null,showTrafic:!1,trafficLayer:null,markers:[],IW:null}},props:{time:Number},components:v({},u),mounted:function(){var e=this;return f(l.a.mark((function t(){return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.PageRender();case 2:case"end":return t.stop()}}),t)})))()},methods:{PageRender:function(){var e=this;return f(l.a.mark((function t(){var a,n,o;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,n=Number(e.time),n>0&&(o=new Date,o.setMinutes(o.getMinutes()+n),e.departureTime=o.toISOString()),c["KEY"]="AIzaSyC6Wt_40qWZ7up5hvZi9GwzxYWmwjnXggs",c["VERSION"]="3.35",t.next=7,c["load"](function(){var t=f(l.a.mark((function t(n){var o;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.googleMap=n,a.smap=new n.maps.Map(e.$refs.googleMap,{center:new n.maps.LatLng(24.774265,46.738586),zoom:11,mapTypeId:n.maps.MapTypeId.ROADMAP}),a.IW=new n.maps.InfoWindow,a.trafficLayer=new n.maps.TrafficLayer,o=p["a"].firestore(),t.next=7,o.collection("routes").get().then(function(){var e=f(l.a.mark((function e(t){return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.forEach((function(e,t){var o=e.data();o.id=e.id,a.routes.push(o);var i=o.FromLocation.split(","),s=new n.maps.LatLng(Number(i[0]),Number(i[1])),r=o.toLocation.split(","),l=new n.maps.LatLng(Number(r[0]),Number(r[1]));d.a.post("http://34.78.114.66:9090/routes/computeRouteWithTrafficLength",{origin:s,destination:l,waypoints:o.waypoints,departureTime:a.departureTime}).then((function(t){console.log("data",t.data),a.render(t.data[0],e.id);var i=new n.maps.Marker({position:new n.maps.LatLng(s),map:a.smap,title:o.RouteName,animation:n.maps.Animation.DROP,icon:"http://maps.google.com/mapfiles/kml/paddle/A.png"});i.addListener("click",(function(e){a.showIW(o,e.latLng)})),a.markers.push(i);var r=new n.maps.Marker({position:new n.maps.LatLng(l),map:a.smap,title:o.RouteName,animation:n.maps.Animation.DROP,icon:"http://maps.google.com/mapfiles/kml/paddle/B.png"});r.addListener("click",(function(e){a.showIW(o,e.latLng)})),a.markers.push(r)})).catch((function(e){console.error(e)}))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 7:case"end":return t.stop()}}),t)})))()},render:function(e,t){var a,n=this,o=this,i=e.polyline.geoJsonLinestring.coordinates,s=i.map((function(e){return{lat:e[1],lng:e[0]}})),r=(null===(a=e.travelAdvisory)||void 0===a?void 0:a.speedReadingIntervals)||[],l=this.routes.findIndex((function(e){return e.id===t}));l>-1?(this.routes[l].poly=[],this.routes[l].ApiData=e):console.error("can not find route with id ".concat(t)),r.forEach((function(e){var t=e.startPolylinePointIndex||0,a=e.endPolylinePointIndex||0,i=e.speed,r=s.slice(t,a+1),c={TRAFFIC_JAM:"#d74342",SLOW:"#e69e01",NORMAL:"#4078c9"};r=new n.googleMap.maps.Polyline({path:r,strokeColor:c[i],geodesic:!0,strokeOpacity:1,strokeWeight:6}),n.googleMap.maps.event.addListener(r,"click",(function(e){o.showIW(o.routes[l],e.latLng)})),r.setMap(o.smap),l>-1&&n.routes[l].poly.push(r)}))},showIW:function(e,t){var a=null===e||void 0===e?void 0:e.ApiData,n="";n+='<div dir="ltr">',n+='<span class="'.concat(e.iSPrimary?"infotitlePr":"infotitleSc",'">').concat(e.RouteName,"</span><br/>"),n+='<span class="infosegment">المسافة: '.concat(a.statistics.distance.value/1e3," كم </span><br/>"),n+='<span class="infosegment"> الوقت بدون زحام: '.concat(Math.round(e.DeafultTime/60)," دقيقة</span><br/>"),n+='<span class="infosegment"> الوقت الان: '.concat(this.fromatTime(a.statistics.duration.value,!0),"</span><br/>"),n+="<br/>",n+='<span class="infonormal">اعتيادي: '.concat(a.statistics.normal.distance.value/1e3," كم (").concat(a.statistics.normal.distance.percentage,")</span><br/>"),n+='<span class="infoslow">بطئ: '.concat(a.statistics.slow.distance.value/1e3," كم  (").concat(a.statistics.slow.distance.percentage,")</span><br/>"),n+='<span class="infojam">مزدحم: '.concat(a.statistics.jam.distance.value/1e3," كم  (").concat(a.statistics.jam.distance.percentage,")</span><br/>"),n+="</div>",this.IW&&(this.IW.setContent(n),this.IW.setPosition(t),this.IW.open({map:this.smap})),console.log("showin poly click",e)},fromatTime:function(e){var t,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=a?parseInt(e):60*parseInt(e);return n<60&&(t="".concat(n,"ثانية")),t="".concat(Math.round(n/60)," دقيقة"),t},renderAll:function(){var e=this,t=this;this.routes.forEach((function(a){a.poly&&a.poly.forEach((function(t){null===t||void 0===t||t.setMap(e.smap)}));var n=a.FromLocation.split(","),o=new e.googleMap.maps.LatLng(Number(n[0]),Number(n[1])),i=a.toLocation.split(","),s=new e.googleMap.maps.LatLng(Number(i[0]),Number(i[1])),r=new e.googleMap.maps.Marker({position:new e.googleMap.maps.LatLng(o),map:e.smap,title:a.RouteName,animation:e.googleMap.maps.Animation.DROP,icon:"http://maps.google.com/mapfiles/kml/paddle/A.png"});r.addListener("click",(function(e){t.showIW(a,e.latLng)})),e.markers.push(r);var l=new e.googleMap.maps.Marker({position:new e.googleMap.maps.LatLng(s),map:e.smap,title:a.RouteName,animation:e.googleMap.maps.Animation.DROP,icon:"http://maps.google.com/mapfiles/kml/paddle/B.png"});l.addListener("click",(function(e){t.showIW(a,e.latLng)})),e.markers.push(l)}))},DeletAll:function(){this.routes.forEach((function(e){e.poly&&e.poly.forEach((function(e){null===e||void 0===e||e.setMap(null)}))})),this.markers.forEach((function(e){null===e||void 0===e||e.setMap(null)}))},drawOnlyRoute:function(e){var t=this;if(e.poly){for(var a=0;a<e.poly.length;a++)e.poly[a].setMap(this.smap);var n=e.FromLocation.split(","),o=new this.googleMap.maps.LatLng(Number(n[0]),Number(n[1])),i=e.toLocation.split(","),s=new this.googleMap.maps.LatLng(Number(i[0]),Number(i[1])),r=new this.googleMap.maps.Marker({position:new this.googleMap.maps.LatLng(o),map:this.smap,title:e.RouteName,animation:this.googleMap.maps.Animation.DROP,icon:"http://maps.google.com/mapfiles/kml/paddle/A.png"});r.addListener("click",(function(a){t.showIW(e,a.latLng)})),this.markers.push(r);var l=new this.googleMap.maps.Marker({position:new this.googleMap.maps.LatLng(s),map:this.smap,title:e.RouteName,animation:this.googleMap.maps.Animation.DROP,icon:"http://maps.google.com/mapfiles/kml/paddle/B.png"});l.addListener("click",(function(a){t.showIW(e,a.latLng)})),this.markers.push(l)}}},watch:{showTrafic:function(){null!=this.trafficLayer&&(this.showTrafic?this.trafficLayer.setMap(this.smap):this.trafficLayer.setMap(null))},routes:function(){this.routsSelect.options=this.routes},time:function(){this.routsSelect.value="",this.PageRender()},"routsSelect.value":function(){this.routsSelect.value?(this.DeletAll(),this.drawOnlyRoute(this.routsSelect.value)):(this.DeletAll(),this.renderAll()),console.log("routsSelect.value change",this.routsSelect.value)}}},b=L,N=(a("70a2"),a("2877")),y=Object(N["a"])(b,i,s,!1,null,null,null),M=y.exports,A={name:"google-maps-page",components:{GoogleMap:M},props:{time:Number}},I=A,k=Object(N["a"])(I,n,o,!1,null,null,null);t["default"]=k.exports}}]);
//# sourceMappingURL=chunk-1524cf6d.2a91df67.js.map