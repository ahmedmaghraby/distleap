(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07838e10"],{"29a5":function(t,e,n){"use strict";n("8e8e3")},"2ee3":function(t,e,n){var a,o;(function(i,s){if(null===i)throw new Error("Google-maps package can be used only in browser");a=s,o="function"===typeof a?a.call(e,n,e,t):a,void 0===o||(t.exports=o)})("undefined"!==typeof window?window:null,(function(){"use strict";var t="3.31",e=null,n=null,a=!1,o=[],i=[],s=null,r={URL:"https://maps.googleapis.com/maps/api/js",KEY:null,LIBRARIES:[],CLIENT:null,CHANNEL:null,LANGUAGE:null,REGION:null};r.VERSION=t,r.WINDOW_CALLBACK_NAME="__google_maps_api_provider_initializator__",r._googleMockApiObject={},r.load=function(t){null===n?!0===a?t&&o.push(t):(a=!0,window[r.WINDOW_CALLBACK_NAME]=function(){c(t)},r.createLoader()):t&&t(n)},r.createLoader=function(){e=document.createElement("script"),e.type="text/javascript",e.src=r.createUrl(),document.body.appendChild(e)},r.isLoaded=function(){return null!==n},r.createUrl=function(){var t=r.URL;return t+="?callback="+r.WINDOW_CALLBACK_NAME,r.KEY&&(t+="&key="+r.KEY),r.LIBRARIES.length>0&&(t+="&libraries="+r.LIBRARIES.join(",")),r.CLIENT&&(t+="&client="+r.CLIENT),r.CHANNEL&&(t+="&channel="+r.CHANNEL),r.LANGUAGE&&(t+="&language="+r.LANGUAGE),r.REGION&&(t+="&region="+r.REGION),r.VERSION&&(t+="&v="+r.VERSION),t},r.release=function(c){var l=function(){r.KEY=null,r.LIBRARIES=[],r.CLIENT=null,r.CHANNEL=null,r.LANGUAGE=null,r.REGION=null,r.VERSION=t,n=null,a=!1,o=[],i=[],"undefined"!==typeof window.google&&delete window.google,"undefined"!==typeof window[r.WINDOW_CALLBACK_NAME]&&delete window[r.WINDOW_CALLBACK_NAME],null!==s&&(r.createLoader=s,s=null),null!==e&&(e.parentElement.removeChild(e),e=null),c&&c()};a?r.load((function(){l()})):l()},r.onLoad=function(t){i.push(t)},r.makeMock=function(){s=r.createLoader,r.createLoader=function(){window.google=r._googleMockApiObject,window[r.WINDOW_CALLBACK_NAME]()}};var c=function(t){var e;for(a=!1,null===n&&(n=window.google),e=0;e<i.length;e++)i[e](n);for(t&&t(n),e=0;e<o.length;e++)o[e](n);o=[]};return r}))},6875:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"google-maps-page"},[n("div",{staticClass:"row"},[n("div",{staticClass:"flex md12 xs12"},[n("va-card",{staticClass:"google-maps-page__widget",attrs:{title:t.$t("generic.routs")}},[n("google-map",{staticStyle:{height:"65vh"}})],1)],1)])])},o=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{ref:"googleMap",staticClass:"google-map fill-height"}),n("va-modal",{attrs:{"no-outside-dismiss":"",fullscreen:"","hide-default-actions":"",title:t.$t("generic.Detailes")+" "+t.routeName,cancelText:t.$t("modal.cancel")},model:{value:t.createModal,callback:function(e){t.createModal=e},expression:"createModal"}},[t.loading?n("div",{staticClass:"flex-center spinner-box"},[n("SpringSpinner",{attrs:{"animation-duration":1500,color:this.$themes.primary,size:80}})],1):n("div",[n("div",{staticClass:"row justify--space-between"},[n("span",[t._v(t._s(t.$t("expectedTime"))),n("span",[t._v(t._s(t.expextedTime))])]),n("span",[t._v(t._s(t.$t("distance"))),n("span",[t._v(t._s(t.distance))])]),n("span",[t._v(t._s(t.$t("timeNow"))+" "),n("span",[t._v(t._s(t.timeNow))])])]),n("div",{staticClass:"row flex-center"},[n("div",{ref:"googleMapDetails",staticClass:"google-map  fill-height",staticStyle:{height:"69vh"},attrs:{id:"map"}}),n("div",{attrs:{id:"sidebar"}},[n("div",{attrs:{id:"panel"}})])]),n("div",{staticClass:"d-flex justify--center mt-3"},[n("va-button",{attrs:{type:"button",color:"gray",flat:""},on:{click:function(e){t.createModal=!1}}},[t._v(" "+t._s(t.$t("modal.cancel"))+" ")])],1)])])],1)},s=[],r=n("a34a"),c=n.n(r),l=n("2ee3"),p=n("4583"),u=n("bc3a"),d=n.n(u),m=n("df40"),g=n("2591");function f(t,e,n,a,o,i,s){try{var r=t[i](s),c=r.value}catch(l){return void n(l)}r.done?e(c):Promise.resolve(c).then(a,o)}function v(t){return function(){var e=this,n=arguments;return new Promise((function(a,o){var i=t.apply(e,n);function s(t){f(i,a,o,s,r,"next",t)}function r(t){f(i,a,o,s,r,"throw",t)}s(void 0)}))}}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var O={name:"google-map",data:function(){return{routeName:"",timeNow:"",distance:"",expextedTime:"",loading:!0,createModal:!1,IW:null,routes:[]}},components:w({},p),mounted:function(){var t=this,e=this;l["KEY"]="AIzaSyC6Wt_40qWZ7up5hvZi9GwzxYWmwjnXggs",l["VERSION"]="3.35",l["load"]((function(n){e.IW=new n.maps.InfoWindow;var a=new n.maps.Map(t.$refs.googleMap,{center:new n.maps.LatLng(24.774265,46.738586),zoom:11,mapTypeId:n.maps.MapTypeId.ROADMAP});Object(m["a"])(n,a);var o=new n.maps.DirectionsService,i=1;function s(t){var e={path:t,strokeColor:"#3304aa",strokeWeight:5,opacity:.4,map:a};return new n.maps.Polyline(e)}function r(t,c,l,p,u){var d={origin:c,destination:l,travelMode:n.maps.TravelMode.DRIVING,waypoints:p};o.route(d,(function(o,u){if(new n.maps.Marker({position:c,map:a}),u===n.maps.DirectionsStatus.OK){var d=s(o.routes[0].overview_path);n.maps.event.addListener(d,"click",(function(n){e.routeName=t.RouteName,e.createModal=!0,e.onRouteClick(t,o,c,l)}))}else u===n.maps.DirectionsStatus.OVER_QUERY_LIMIT?(i++,setTimeout((function(){r(t,c,l,p)}),500*i)):console.log("Route: "+u)}))}var l=g["a"].firestore();l.collection("StaticRoads").get().then(function(){var t=v(c.a.mark((function t(a){return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a.forEach((function(t,a){var o=t.data();o.id=t.id,e.routes.push(o);var i=o.FromLocation.split(","),s=new n.maps.LatLng(Number(i[0]),Number(i[1])),c=o.toLocation.split(","),l=new n.maps.LatLng(Number(c[0]),Number(c[1])),p=[];o.waypoints.forEach((function(t){t.place_id?p.push({location:{placeId:t.place_id}}):p.push({location:new n.maps.LatLng(t.latitude,t.longitude)})})),r(o,s,l,p,a)}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))},methods:{onRouteClick:function(t,e,n,a){var o=this;this.loading=!0,this.createModal=!0;var i=this,s={origin:n,destination:a,waypoints:t.waypoints,departureTime:null};d.a.post("https://map-api-ubzex7qxpa-ew.a.run.app/routes/computeRouteWithTrafficLength",s).then((function(s){o.loading=!1,i.timeNow=s.data[0].statistics.duration.text,i.expextedTime=s.data[0].statistics.staticDuration.text,i.distance=s.data[0].statistics.distance.text,l["KEY"]="AIzaSyC6Wt_40qWZ7up5hvZi9GwzxYWmwjnXggs",l["VERSION"]="3.35",l["load"]((function(r){setTimeout((function(){var c=new r.maps.Map(o.$refs.googleMapDetails,{center:new r.maps.LatLng(24.774265,46.738586),zoom:11,mapTypeId:r.maps.MapTypeId.ROADMAP}),l={TRAFFIC_JAM:"#d74342",SLOW:"#e69e01",NORMAL:"#4078c9"},p=s.data[0].polyline.geoJsonLinestring.coordinates,u=p.map((function(t){return{lat:t[1],lng:t[0]}}));t.ApiData=s.data[0],s.data[0].travelAdvisory.speedReadingIntervals.forEach((function(e){var n=u.slice(0===e.startPolylinePointIndex?0:e.startPolylinePointIndex-1,e.endPolylinePointIndex),a=new r.maps.Polyline({path:n,strokeColor:l[e.speed],geodesic:!0,strokeOpacity:1,strokeWeight:6});a.setMap(c),r.maps.event.addListener(a,"click",(function(e){i.showIW(t,e.latLng,c)}))}));var d=new r.maps.Polyline({strokeColor:"transparent",geodesic:!0,strokeOpacity:.1,strokeWeight:6}),m=new r.maps.DirectionsRenderer({preserveViewport:!0,suppressMarkers:!0,map:c,polylineOptions:d,panel:document.getElementById("panel")});m.setDirections(e),new r.maps.Marker({position:a,map:c,animation:r.maps.Animation.BOUNCE,icon:"https://gcdnb.pbrd.co/images/hnKUay2TdxIv.png"});var g={url:"http://maps.google.com/mapfiles/kml/paddle/A.png",scaledSize:new r.maps.Size(35,35)};new r.maps.Marker({position:n,map:c,animation:r.maps.Animation.DROP,icon:g})}),100)}))}))},showIW:function(t,e,n){var a=null===t||void 0===t?void 0:t.ApiData,o="";o+='<div dir="ltr">',o+='<span class="infotitleSc">'.concat(t.RouteName,"</span><br/>"),o+='<span class="infosegment">'.concat(this.$t("distance"),": ").concat(a.statistics.distance.value/1e3," ").concat(this.$t("KM")," </span><br/>"),o+='<span class="infosegment"> '.concat(this.$t("TimeWithoutCrowding"),": ").concat(Math.round(t.DeafultTime/60)," ").concat(this.$t("minuits"),"</span><br/>"),o+='<span class="infosegment"> '.concat(this.$t("timeNow"),": ").concat(this.fromatTime(a.statistics.duration.value,!0),"</span><br/>"),o+="<br/>",o+='<span class="infonormal">'.concat(this.$t("normal"),": ").concat(a.statistics.normal.distance.value/1e3," ").concat(this.$t("KM")," (").concat(a.statistics.normal.distance.percentage,")</span><br/>"),o+='<span class="infoslow">'.concat(this.$t("Slow"),": ").concat(a.statistics.slow.distance.value/1e3," ").concat(this.$t("KM"),"  (").concat(a.statistics.slow.distance.percentage,")</span><br/>"),o+='<span class="infojam">'.concat(this.$t("crowded"),": ").concat(a.statistics.jam.distance.value/1e3," ").concat(this.$t("KM"),"  (").concat(a.statistics.jam.distance.percentage,")</span><br/>"),o+="</div>",this.IW&&(this.IW.setContent(o),this.IW.setPosition(e),this.IW.open({map:n})),console.log("showin poly click",t)},fromatTime:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=n?parseInt(t):60*parseInt(t);return a<60&&(e="".concat(a).concat(this.$t("second"))),e="".concat(Math.round(a/60)," ").concat(this.$t("minuits")),e}}},L=O,I=(n("29a5"),n("2877")),b=Object(I["a"])(L,i,s,!1,null,null,null),_=b.exports,N={name:"google-maps-page",components:{GoogleMap:_}},C=N,E=Object(I["a"])(C,a,o,!1,null,null,null);e["default"]=E.exports},"8e8e3":function(t,e,n){},df40:function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var a=[[24.834390282923472,46.726942687059456],[24.83352596002162,46.727552103129206],[24.833514698341,46.72764251565651],[24.835829951487217,46.732673596326904],[24.836033975492047,46.73280474279101],[24.836160277748636,46.73272712819991],[24.836830652819362,46.73162980282343],[24.836767502398917,46.73151471667984],[24.834392472564037,46.726989756747095]],o=[[24.835935991606018,46.727812123357005],[24.834390528851333,46.72677352796306],[24.836836063476674,46.73148472831077],[24.836899750056897,46.73148005153129],[24.837235175413724,46.730839101980166],[24.837286128159633,46.730549034909295],[24.835933619176323,46.72780722380092]],i=[[24.83785570338497,46.737324372981526],[24.839167378105834,46.73392127330064],[24.837369367189563,46.733042293374716],[24.83707087410722,46.733040009418836],[24.836896029262224,46.73310922252916],[24.836788379054347,46.7331556401303],[24.836657326616745,46.73318142783453],[24.8364935108966,46.73310406649334],[24.836423304103672,46.73304733476273],[24.83587291824639,46.73349083884446]],s=[[24.828950517373396,46.72444691815201],[24.82891025841422,46.72389993162718],[24.829077960944453,46.72341207417651],[24.829366416727588,46.723027696459205],[24.829695126059907,46.72279115125598],[24.83005067203883,46.722680264728254],[24.830352552883397,46.72268025652009],[24.832069954985403,46.7261987521028],[24.83031904620291,46.72734447579793]],r=[[24.820496418619566,46.70908343774435],[24.820159134245923,46.70888879704677],[24.817292303494224,46.711056536064945],[24.821105624899314,46.7158434192276],[24.822617721724633,46.71327505355195]],c=a.map((function(t){return{lat:t[0],lng:t[1]}})),l=o.map((function(t){return{lat:t[0],lng:t[1]}})),p=i.map((function(t){return{lat:t[0],lng:t[1]}})),u=s.map((function(t){return{lat:t[0],lng:t[1]}})),d=r.map((function(t){return{lat:t[0],lng:t[1]}})),m=[{position:[24.835352308351325,46.72963191240156],img:"https://gcdnb.pbrd.co/images/hnKUay2TdxIv.png"},{position:[24.836287779512137,46.7292490420719],img:"https://developers.google.com/maps/documentation/javascript/examples/full/images/parking_lot_maps.png"},{position:[24.83782012388439,46.7344521219667],img:"https://developers.google.com/maps/documentation/javascript/examples/full/images/parking_lot_maps.png"},{position:[24.831075812684364,46.72558728126527],img:"https://developers.google.com/maps/documentation/javascript/examples/full/images/parking_lot_maps.png"},{position:[24.820516349336494,46.71266163039018],img:"http://cdn.onlinewebfonts.com/svg/img_27942.png"}];function g(t,e){var n=new t.maps.Polygon({paths:u,strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35});n.setMap(e);var a=new t.maps.Polygon({paths:d,strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35});a.setMap(e);var o=new t.maps.Polygon({paths:p,strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35});o.setMap(e);var i=new t.maps.Polygon({paths:l,strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35});i.setMap(e);var s=new t.maps.Polygon({paths:c,strokeColor:"#58007b",strokeOpacity:.8,strokeWeight:2,fillColor:"#58007b",fillOpacity:.35});s.setMap(e),m.forEach((function(n,a){var o={url:n.img,scaledSize:new t.maps.Size(25,35)},i={url:n.img,scaledSize:new t.maps.Size(25,35)};new t.maps.Marker({position:new t.maps.LatLng(n.position[0],n.position[1]),map:e,animation:0===a?t.maps.Animation.BOUNCE:t.maps.Animation.DROP,icon:4===a?o:i})}))}}}]);
//# sourceMappingURL=chunk-07838e10.c1af1356.js.map