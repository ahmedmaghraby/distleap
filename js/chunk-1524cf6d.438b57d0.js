(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1524cf6d"],{"2ee3":function(e,t,n){var o,a;(function(i,r){if(null===i)throw new Error("Google-maps package can be used only in browser");o=r,a="function"===typeof o?o.call(t,n,t,e):o,void 0===a||(e.exports=a)})("undefined"!==typeof window?window:null,(function(){"use strict";var e="3.31",t=null,n=null,o=!1,a=[],i=[],r=null,s={URL:"https://maps.googleapis.com/maps/api/js",KEY:null,LIBRARIES:[],CLIENT:null,CHANNEL:null,LANGUAGE:null,REGION:null};s.VERSION=e,s.WINDOW_CALLBACK_NAME="__google_maps_api_provider_initializator__",s._googleMockApiObject={},s.load=function(e){null===n?!0===o?e&&a.push(e):(o=!0,window[s.WINDOW_CALLBACK_NAME]=function(){l(e)},s.createLoader()):e&&e(n)},s.createLoader=function(){t=document.createElement("script"),t.type="text/javascript",t.src=s.createUrl(),document.body.appendChild(t)},s.isLoaded=function(){return null!==n},s.createUrl=function(){var e=s.URL;return e+="?callback="+s.WINDOW_CALLBACK_NAME,s.KEY&&(e+="&key="+s.KEY),s.LIBRARIES.length>0&&(e+="&libraries="+s.LIBRARIES.join(",")),s.CLIENT&&(e+="&client="+s.CLIENT),s.CHANNEL&&(e+="&channel="+s.CHANNEL),s.LANGUAGE&&(e+="&language="+s.LANGUAGE),s.REGION&&(e+="&region="+s.REGION),s.VERSION&&(e+="&v="+s.VERSION),e},s.release=function(l){var c=function(){s.KEY=null,s.LIBRARIES=[],s.CLIENT=null,s.CHANNEL=null,s.LANGUAGE=null,s.REGION=null,s.VERSION=e,n=null,o=!1,a=[],i=[],"undefined"!==typeof window.google&&delete window.google,"undefined"!==typeof window[s.WINDOW_CALLBACK_NAME]&&delete window[s.WINDOW_CALLBACK_NAME],null!==r&&(s.createLoader=r,r=null),null!==t&&(t.parentElement.removeChild(t),t=null),l&&l()};o?s.load((function(){c()})):c()},s.onLoad=function(e){i.push(e)},s.makeMock=function(){r=s.createLoader,s.createLoader=function(){window.google=s._googleMockApiObject,window[s.WINDOW_CALLBACK_NAME]()}};var l=function(e){var t;for(o=!1,null===n&&(n=window.google),t=0;t<i.length;t++)i[t](n);for(e&&e(n),t=0;t<a.length;t++)a[t](n);a=[]};return s}))},"70a2":function(e,t,n){"use strict";n("ca90")},ca90:function(e,t,n){},f96f:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"google-maps-page"},[n("div",{staticClass:"row"},[n("div",{staticClass:"flex md12 xs12"},[n("va-card",{staticClass:"google-maps-page__widget",attrs:{title:e.$t("generic.routs")}},[n("span",{staticClass:"flex",attrs:{slot:"actions"},slot:"actions"},[n("va-icon",{staticClass:"fa fa-circle",staticStyle:{color:"#46a28b"}}),e._v(" طريق رئيسي ")],1),n("span",{staticClass:"flex",attrs:{slot:"actions"},slot:"actions"},[n("va-icon",{staticClass:"fa fa-circle",staticStyle:{color:"#ff1d5e"}}),e._v(" طريق ثانوي ")],1),n("google-map",{staticStyle:{height:"65vh"}})],1)],1)])])},a=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{ref:"googleMap",staticClass:"google-map fill-height"}),n("va-modal",{attrs:{"no-outside-dismiss":"",fullscreen:"","hide-default-actions":"",title:e.$t("generic.Detailes")+" "+e.routeName,cancelText:e.$t("modal.cancel")},model:{value:e.createModal,callback:function(t){e.createModal=t},expression:"createModal"}},[e.loading?n("div",{staticClass:"flex-center spinner-box"},[n("SpringSpinner",{attrs:{"animation-duration":1500,color:this.$themes.primary,size:80}})],1):n("div",[n("div",{staticClass:"row justify--space-between"},[n("span",[e._v("الوقت المتوقع "),n("span",[e._v(e._s(e.expextedTime))])]),n("span",[e._v("المسافة"),n("span",[e._v(e._s(e.distance))])]),n("span",[e._v("الوقت الان "),n("span",[e._v(e._s(e.timeNow))])])]),n("div",{staticClass:"row flex-center"},[n("div",{ref:"googleMapDetails",staticClass:"google-map  fill-height",staticStyle:{height:"69vh"},attrs:{id:"map"}}),n("div",{attrs:{id:"sidebar"}},[n("div",{attrs:{id:"panel"}})])]),n("div",{staticClass:"d-flex justify--center mt-3"},[n("va-button",{attrs:{type:"button",color:"gray",flat:""},on:{click:function(t){e.createModal=!1}}},[e._v(" "+e._s(e.$t("modal.cancel"))+" ")])],1)])])],1)},r=[],s=n("a34a"),l=n.n(s),c=n("2ee3"),u=n("2591"),p=n("4583"),d=n("bc3a"),m=n.n(d);function g(e,t,n,o,a,i,r){try{var s=e[i](r),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(o,a)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function r(e){g(i,o,a,r,s,"next",e)}function s(e){g(i,o,a,r,s,"throw",e)}r(void 0)}))}}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L={name:"google-map",data:function(){return{routeName:"",timeNow:"",distance:"",expextedTime:"",dataTable:[[24.903568262132232,46.70643480252375],[24.760974344801873,46.647011298295844],[24.727735687466648,46.66380934941976],[24.742007579699624,46.69780225105244],[24.740766564100955,46.59803407968792],[24.722140458133055,46.66648490098593],[24.816657580193898,46.77706900525439],[24.794778003457576,46.85968684908143]],loading:!0,createModal:!1}},components:w({},p),mounted:function(){var e=this;return f(l.a.mark((function t(){var n;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e,c["KEY"]="AIzaSyC6Wt_40qWZ7up5hvZi9GwzxYWmwjnXggs",c["VERSION"]="3.35",c["load"]((function(t){var o=new t.maps.Map(e.$refs.googleMap,{center:new t.maps.LatLng(24.774265,46.738586),zoom:11,mapTypeId:t.maps.MapTypeId.ROADMAP}),a=new t.maps.DirectionsService;function i(e,a,i,r){var s=i?"#1300e8":a.iSPrimary?"#46a28b":"#ff1d5e",l=t.maps.geometry.encoding.decodePath(e),c=new t.maps.Polyline({path:l,strokeColor:s,geodesic:!0,strokeOpacity:.6,strokeWeight:6,zIndex:r});return c.setMap(o),t.maps.event.addListener(c,"click",(function(e){console.log("route"),n.routeName=a.RouteName,n.onRouteClick(a)})),c}var r=0;function s(e,n,l,c,u){var p=arguments.length>5&&void 0!==arguments[5]&&arguments[5],d={preserveViewport:!0,suppressMarkers:!0,routeIndex:n,polylineOptions:new t.maps.Polyline({geodesic:!0,strokeOpacity:0,strokeWeight:.7}),map:o},m={origin:l,destination:c,travelMode:t.maps.TravelMode.DRIVING,waypoints:u},g=new t.maps.DirectionsRenderer(d);g.setMap(o),a.route(m,(function(a,d){new t.maps.Marker({position:new t.maps.LatLng(l),map:o}),new t.maps.Marker({position:new t.maps.LatLng(c),map:o}),d===t.maps.DirectionsStatus.OK?i(a.routes[0].overview_polyline,e,p,n):d===t.maps.DirectionsStatus.OVER_QUERY_LIMIT&&(r++,setTimeout((function(){s(e,n,l,c,u,p)}),100*r))}))}var l=[],c=u["a"].firestore();c.collection("routes").get().then((function(n){e.dataTable=[],n.forEach((function(e,n){var o=e.data();o.id=e.id,l.push({org:o.FromLocation,des:o.toLocation});var a=o.FromLocation.split(","),i=new t.maps.LatLng(Number(a[0]),Number(a[1])),r=o.toLocation.split(","),c=new t.maps.LatLng(Number(r[0]),Number(r[1])),u=[];o.waypoints.forEach((function(e){u.push({location:{placeId:e.place_id}})})),s(o,n,i,c,u)}))}))}));case 4:case"end":return t.stop()}}),t)})))()},methods:{onRouteClick:function(e){var t=this;this.loading=!0,this.createModal=!0;var n=e.FromLocation.split(","),o=e.toLocation.split(","),a=[];e.waypoints.forEach((function(e){a.push({placeId:e.place_id})})),this.expextedTime=e.DeafultTime?(e.DeafultTime/60).toFixed(2)+"د":"";var i=this,r={origin:{location:{latLng:{latitude:Number(n[0]),longitude:Number(n[1])}}},destination:{location:{latLng:{latitude:Number(o[0]),longitude:Number(o[1])}}},intermediates:a,travelMode:"drive",routingPreference:"traffic_aware",polylineQuality:"high_quality",computeAlternativeRoutes:!1,routeModifiers:{avoidTolls:!1,avoidHighways:!1,avoidFerries:!1,avoidIndoor:!1},languageCode:"ar-EG",units:"METRIC"};m.a.post("https://routes.googleapis.com/directions/v2:computeRoutes",r,{headers:{"Content-type":"application/json","X-Goog-Api-Key":"AIzaSyC6Wt_40qWZ7up5hvZi9GwzxYWmwjnXggs","X-Goog-FieldMask":"*"}}).then((function(a){var r;if(t.loading=!1,a.data.routes[0].duration){var s,l,u=Number(null===(s=a.data.routes[0])||void 0===s||null===(l=s.duration)||void 0===l?void 0:l.slice(0,-1));i.timeNow=(u/60).toFixed(2)+"د"}if(t.expextedTime){var p,d,m=Number(null===(p=a.data.routes[0])||void 0===p||null===(d=p.staticDuration)||void 0===d?void 0:d.slice(0,-1));i.expextedTime=(m/60).toFixed(2)+"د"}i.distance=(null===(r=a.data.routes[0])||void 0===r?void 0:r.distanceMeters)/1e3+"كم",c["KEY"]="AIzaSyC6Wt_40qWZ7up5hvZi9GwzxYWmwjnXggs",c["VERSION"]="3.35",c["load"]((function(i){setTimeout((function(){var r,s,l=new i.maps.Map(t.$refs.googleMapDetails,{center:new i.maps.LatLng(24.774265,46.738586),zoom:11,mapTypeId:i.maps.MapTypeId.ROADMAP}),c={TRAFFIC_JAM:"#d74342",SLOW:"#e69e01",NORMAL:"#4078c9"},u=i.maps.geometry.encoding.decodePath(null===(r=a.data.routes[0])||void 0===r||null===(s=r.polyline)||void 0===s?void 0:s.encodedPolyline);a.data.routes[0].travelAdvisory.speedReadingIntervals.forEach((function(e){var t=u.slice(0===e.startPolylinePointIndex?0:e.startPolylinePointIndex-1,e.endPolylinePointIndex),n=new i.maps.Polyline({path:t,strokeColor:c[e.speed],geodesic:!0,strokeOpacity:1,strokeWeight:6});n.setMap(l)}));var p=new i.maps.DirectionsService,d=new i.maps.DirectionsRenderer({preserveViewport:!0,suppressMarkers:!0,map:l,panel:document.getElementById("panel")}),m=[];e.waypoints.forEach((function(e){m.push({location:{placeId:e.place_id}})})),p.route({origin:new i.maps.LatLng(Number(n[0]),Number(n[1])),destination:new i.maps.LatLng(Number(o[0]),Number(o[1])),waypoints:m,travelMode:"DRIVING",language:"ar-EG"}).then((function(e){d.setDirections(e)})),new i.maps.Marker({position:new i.maps.LatLng(Number(n[0]),Number(n[1])),map:l,animation:i.maps.Animation.BOUNCE}),new i.maps.Marker({position:new i.maps.LatLng(Number(o[0]),Number(o[1])),map:l,animation:i.maps.Animation.BOUNCE})}),100)})),console.log(a)}))}}},N=L,y=(n("70a2"),n("2877")),b=Object(y["a"])(N,i,r,!1,null,null,null),E=b.exports,I={name:"google-maps-page",components:{GoogleMap:E}},_=I,A=Object(y["a"])(_,o,a,!1,null,null,null);t["default"]=A.exports}}]);
//# sourceMappingURL=chunk-1524cf6d.438b57d0.js.map