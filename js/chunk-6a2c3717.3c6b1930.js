(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a2c3717"],{"0d66":function(t,e,n){"use strict";n("5e91")},"11f7":function(t,e,n){"use strict";var a=n("a026");e["a"]=new a["default"]},"1ee7":function(t,e,n){},"2ee3":function(t,e,n){var a,o;(function(i,r){if(null===i)throw new Error("Google-maps package can be used only in browser");a=r,o="function"===typeof a?a.call(e,n,e,t):a,void 0===o||(t.exports=o)})("undefined"!==typeof window?window:null,(function(){"use strict";var t="3.31",e=null,n=null,a=!1,o=[],i=[],r=null,l={URL:"https://maps.googleapis.com/maps/api/js",KEY:null,LIBRARIES:[],CLIENT:null,CHANNEL:null,LANGUAGE:null,REGION:null};l.VERSION=t,l.WINDOW_CALLBACK_NAME="__google_maps_api_provider_initializator__",l._googleMockApiObject={},l.load=function(t){null===n?!0===a?t&&o.push(t):(a=!0,window[l.WINDOW_CALLBACK_NAME]=function(){c(t)},l.createLoader()):t&&t(n)},l.createLoader=function(){e=document.createElement("script"),e.type="text/javascript",e.src=l.createUrl(),document.body.appendChild(e)},l.isLoaded=function(){return null!==n},l.createUrl=function(){var t=l.URL;return t+="?callback="+l.WINDOW_CALLBACK_NAME,l.KEY&&(t+="&key="+l.KEY),l.LIBRARIES.length>0&&(t+="&libraries="+l.LIBRARIES.join(",")),l.CLIENT&&(t+="&client="+l.CLIENT),l.CHANNEL&&(t+="&channel="+l.CHANNEL),l.LANGUAGE&&(t+="&language="+l.LANGUAGE),l.REGION&&(t+="&region="+l.REGION),l.VERSION&&(t+="&v="+l.VERSION),t},l.release=function(c){var s=function(){l.KEY=null,l.LIBRARIES=[],l.CLIENT=null,l.CHANNEL=null,l.LANGUAGE=null,l.REGION=null,l.VERSION=t,n=null,a=!1,o=[],i=[],"undefined"!==typeof window.google&&delete window.google,"undefined"!==typeof window[l.WINDOW_CALLBACK_NAME]&&delete window[l.WINDOW_CALLBACK_NAME],null!==r&&(l.createLoader=r,r=null),null!==e&&(e.parentElement.removeChild(e),e=null),c&&c()};a?l.load((function(){s()})):s()},l.onLoad=function(t){i.push(t)},l.makeMock=function(){r=l.createLoader,l.createLoader=function(){window.google=l._googleMockApiObject,window[l.WINDOW_CALLBACK_NAME]()}};var c=function(t){var e;for(a=!1,null===n&&(n=window.google),e=0;e<i.length;e++)i[e](n);for(t&&t(n),e=0;e<o.length;e++)o[e](n);o=[]};return l}))},"45d7":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"contanier"},[n("div",{staticClass:"row"},[n("products-Table",{staticClass:"flex md12 sm12 xs12"})],1)])},o=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"contanier"},[n("va-card",{staticClass:"w-100",attrs:{title:t.$t("tables.StaticRoads")}},[n("va-button",{staticClass:"mr-0",attrs:{slot:"actions",icon:"fa fa-plus",title:t.$t("modal.add"),flat:""},on:{click:t.showCreateModal},slot:"actions"}),n("va-data-table",{attrs:{fields:t.fields,data:t.dataTable,loading:t.loading,totalPages:t.totalPages,"no-pagination":t.searchBool,"api-mode":"",hoverable:""},on:{"page-selected":t.readItems},scopedSlots:t._u([{key:"marker",fn:function(e){return[t._v(" "+t._s(e.rowIndex+1+10*(t.pageNumber-1))+" ")]}},{key:"DeafultTime",fn:function(e){return[t._v(" "+t._s((e.rowData.DeafultTime/60).toFixed(2)+t.$t("minuits"))+" ")]}},{key:"distance",fn:function(e){return[t._v(" "+t._s((e.rowData.distance/1e3).toFixed(2)+t.$t("KM"))+" ")]}},{key:"actions",fn:function(e){return[n("va-button",{staticClass:"ma-0",attrs:{flat:"",small:"",color:"gray",icon:"fa fa-edit",title:t.$t("modal.edit")},on:{click:function(n){return t.showEditModal(e.rowData)}}}),n("va-button",{staticClass:"ma-0",attrs:{flat:"",small:"",color:"danger",icon:"fa fa-trash",title:t.$t("modal.delete")},on:{click:function(n){return t.showDeleteModal(e.rowData)}}})]}}])})],1),n("va-modal",{attrs:{"no-outside-dismiss":"",title:t.$t("generic.deleteItemTitle"),okText:t.$t("modal.delete"),cancelText:t.$t("modal.cancel"),message:t.$t("generic.deleteItemMsg")},on:{ok:function(e){return t.okDeletefun()},cancel:function(e){return t.cancleDeletefun()}},model:{value:t.deleteModal,callback:function(e){t.deleteModal=e},expression:"deleteModal"}}),n("va-modal",{class:t.editModal?"":"List",attrs:{"no-outside-dismiss":"",size:t.editModal?"normal":"large",title:t.$t(t.modelTitle),fullscreen:t.editModal,"hide-default-actions":""},on:{cancel:function(e){t.editModal?t.cancleEditfun():t.cancleCreatefun()}},model:{value:t.createModal,callback:function(e){t.createModal=e},expression:"createModal"}},[n("form",{on:{submit:function(e){e.preventDefault(),t.editModal?t.okEditfun():t.okCreatefun()}}},[t.editModal?n("div",{staticClass:"row"},[n("div",{ref:"googleMapWaypoints",staticClass:"google-map fill-height",attrs:{id:"map"}}),n("div",{attrs:{id:"sidebar"}},[n("p",[t._v("Total Distance: "),n("span",{attrs:{id:"total"}})]),n("div",{attrs:{id:"panel"}})])]):n("div",{staticClass:"row flex-center"},[n("div",{staticClass:"flex md6 sm12 xs12 px-1"},[n("label",{staticClass:"input-label"},[t._v(" "+t._s(t.$t("placeholder.RouteName")+" *")+" ")]),n("va-input",{attrs:{placeholder:t.$t("placeholder.RouteName"),required:""},model:{value:t.currentobject.RouteName,callback:function(e){t.$set(t.currentobject,"RouteName",e)},expression:"currentobject.RouteName"}}),n("span",{staticClass:"input-label"},[t._v(" "+t._s(t.$t("placeholder.RouteNameFormat"))+" ")])],1),n("div",{staticClass:"flex md6 sm12 xs12 px-1"},[n("label",{staticClass:"input-label"},[t._v(" "+t._s(t.$t("placeholder.FromLocation")+" *")+" ")]),n("va-input",{attrs:{error:t.validateLocaion(t.currentobject.FromLocation),"error-messages":t.$t("errorMessage.FromLocation"),placeholder:t.$t("placeholder.FromLocation"),required:""},model:{value:t.currentobject.FromLocation,callback:function(e){t.$set(t.currentobject,"FromLocation",e)},expression:"currentobject.FromLocation"}}),n("span",{staticClass:"input-label"},[t._v(" "+t._s(t.$t("placeholder.ExamleLocation"))+" ")])],1)]),n("div",{staticClass:"d-flex justify--center mt-3"},[n("va-button",{attrs:{type:"button",color:"gray",flat:""},on:{click:function(e){t.editModal?t.cancleEditfun():t.cancleCreatefun()}}},[t._v(" "+t._s(t.$t("modal.cancel"))+" ")]),n("va-button",{staticClass:"my-0",attrs:{type:"submit",disabled:t.stopBtn}},[t._v(t._s(t.$t(t.modelOktext)))])],1)])])],1)},r=[],l=n("11f7"),c=n("646b"),s=n("2591"),u=n("2ee3"),d={data:function(){return{perPage:20,totalPages:1,modelTitle:"",stopBtn:!1,SpecificEntityFilds:[],deleteModal:!1,editModal:!1,createModal:!1,modelOktext:"",opjectBeforeEdit:{},currentobject:{},db:s["a"].firestore(),dataTable:[],pageNumber:1,loading:!0,searchBool:!1}},computed:{fields:function(){return[{name:"__slot:marker",width:"30px",dataClass:"text-center",title:"#"},{name:"RouteName",title:this.$t("tables.headings.RouteName"),sortField:"time",width:"250px",sortCallBack:"sortCallBack|RouteName"},{name:"__slot:DeafultTime",title:this.$t("tables.headings.DeafultTime"),sortField:"name",sortCallBack:"sortCallBack|DeafultTime"},{name:"__slot:distance",title:this.$t("tables.headings.distance"),sortField:"name",sortCallBack:"sortCallBack|distance"},{name:"__slot:actions",dataClass:"text-right"}]},filterFileds:function(){return[{isNum:!1,isString:!1,isBoolean:!1,isDate:!0,showLabel:!0,name:"time",class:"",config:{enableTime:!0,defaultDate:new Date},title:this.$t("placeholder.time")},{isNum:!1,isString:!0,showLabel:!0,isBoolean:!1,isDate:!1,name:"route",title:this.$t("placeholder.route")},{isNum:!0,isString:!1,isBoolean:!1,isDate:!1,showLabel:!0,name:"avrgTraffic",title:this.$t("placeholder.avrgTraffic"),step:1e-5,min:0,max:100}]}},created:function(){var t=this;document.title=this.$t("generic.Leap")+"-"+this.$t("tables.analytics"),this.readItems(this.pageNumber),l["a"].$on("SearchStart",(function(e){t.loading||t.readItems(1,null,e)}))},methods:{validateEmail:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(null===t||void 0===t||""===t)return!1;var e=t.split(",");if(e.length>=1){var n=!1;return e.forEach((function(t){n=c["a"].validateEmail(t)})),n}return!0},validateLocaion:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(null===t||void 0===t||""===t)return!1;var e=t.split(",");return 2!==e.length||!(this.isLatitude(e[0])&&this.isLongitude(e[1]))},isLatitude:function(t){return isFinite(t)&&Math.abs(t)<=90},isLongitude:function(t){return isFinite(t)&&Math.abs(t)<=180},formatDate:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e){var n={weekday:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"};return new Date(t).toLocaleDateString("ar-EG",n)}var a={year:"numeric",month:"numeric",day:"numeric"};return new Date(t).toLocaleDateString("ar-EG",a)},sortCallBack:function(t){this.readItems(1,t[0].toString().charAt(0).toUpperCase()+t[0].toString().slice(1))},readItems:function(){var t=this;this.loading=!0;var e=s["a"].firestore();e.collection("StaticRoads").orderBy("createAt","asc").get().then((function(e){t.dataTable=[],e.forEach((function(e,n){var a=e.data();a.id=e.id,t.dataTable.push(a)})),t.loading=!1}))},create:function(){var t=this;this.stopBtn=!0,this.loading=!0,u["KEY"]="AIzaSyC6Wt_40qWZ7up5hvZi9GwzxYWmwjnXggs",u["VERSION"]="3.35",u["load"]((function(e){var n={origins:[t.getLocationFromString(t.currentobject.FromLocation,e)],destinations:[t.getLocationFromString("24.83641315351828, 46.732968596904755",e)],travelMode:e.maps.TravelMode.DRIVING,unitSystem:e.maps.UnitSystem.METRIC,durationInTraffic:!0,language:"ar",drivingOptions:{departureTime:new Date(Date.now()),trafficModel:"optimistic"},avoidHighways:!1,avoidTolls:!1,avoidFerries:!1},a=new e.maps.DistanceMatrixService;a.getDistanceMatrix(n).then((function(e){t.currentobject.originAddresses=e.originAddresses[0],t.currentobject.DeafultTime=e.rows[0].elements[0].duration.value,t.currentobject.distance=e.rows[0].elements[0].distance.value,t.currentobject.createAt=new Date(Date.now()),t.currentobject.UpdateAt=new Date(Date.now()),t.currentobject.toLocation="24.83641315351828, 46.732968596904755",t.currentobject.createBy=t.$store.state.user.email,t.currentobject.waypoints=[],t.currentobject.UpdateBy=t.$store.state.user.email,t.db.collection("StaticRoads").add(t.currentobject).then((function(e){t.readItems(),t.cancleCreatefun()}))}))}))},edit:function(){var t=this;this.stopBtn=!0,this.loading=!0,this.db.collection("StaticRoads").doc(this.currentobject.id).set(this.currentobject).then((function(e){t.readItems(),t.createModal=!1,t.loading=!1,t.currentobject={},t.editModal=!1,t.stopBtn=!1}))},remove:function(t){var e=this;this.loading=!0,this.db.collection("StaticRoads").doc(t).delete().then((function(t){e.readItems(),e.cancleDeletefun()}))},getLocationFromString:function(t,e){var n=t.split(","),a=parseFloat(n[0]),o=parseFloat(n[1]);return new e.maps.LatLng(a,o)},showDeleteModal:function(t){this.deleteModal=!0,this.currentobject=t},okDeletefun:function(){this.remove(this.currentobject.id)},cancleDeletefun:function(){this.currentobject={},this.loading=!1,this.stopBtn=!1},showEditModal:function(t){var e=this;this.editModal=!0,this.modelTitle="generic.editItemTitle",this.modelOktext="modal.edit",this.createModal=!0,this.opjectBeforeEdit=Object.assign({},t),this.currentobject=t,this.loading=!0,setTimeout((function(){u["KEY"]="AIzaSyC6Wt_40qWZ7up5hvZi9GwzxYWmwjnXggs",u["VERSION"]="3.35",u["load"]((function(t){var n=new t.maps.Map(e.$refs.googleMapWaypoints,{center:new t.maps.LatLng(24.774265,46.738586),zoom:11,mapTypeId:t.maps.MapTypeId.ROADMAP}),a=new t.maps.DirectionsService,o=new t.maps.DirectionsRenderer({draggable:!0,map:n,panel:document.getElementById("panel")});o.addListener("directions_changed",(function(){var t=o.getDirections();t&&e.computeTotalDistance(t)}));var i=e.currentobject.FromLocation.split(","),r=new t.maps.LatLng(Number(i[0]),Number(i[1])),l=e.currentobject.toLocation.split(","),c=new t.maps.LatLng(Number(l[0]),Number(l[1])),s=[];e.currentobject.waypoints.forEach((function(e){e.place_id?s.push({location:{placeId:e.place_id}}):(console.log(e),s.push({location:new t.maps.LatLng(e.latitude,e.longitude)}))})),e.displayRoute(r,c,a,o,s)}))}),1e3)},displayRoute:function(t,e,n,a,o){n.route({origin:t,destination:e,waypoints:o,travelMode:"DRIVING",durationInTraffic:!0,language:"ar",drivingOptions:{departureTime:new Date(Date.now()),trafficModel:"optimistic"}}).then((function(t){a.setDirections(t)})).catch((function(t){alert("Could not display directions due to: "+t)}))},computeTotalDistance:function(t){var e=this;this.currentobject.waypoints=[],t.request.waypoints.forEach((function(t){console.log("point",t),"function"===typeof t.location.lat?e.currentobject.waypoints.push({latitude:t.location.lat(),longitude:t.location.lng()}):e.currentobject.waypoints.push({latitude:t.location.lat,longitude:t.location.lng})}));var n=0,a=0,o=t.routes[0];if(o){for(var i=0;i<o.legs.length;i++)n+=o.legs[i].distance.value,a+=o.legs[i].duration.value;this.currentobject.distance=n,this.currentobject.DeafultTime=a,n/=1e3,document.getElementById("total").innerHTML=n+" km"}},okEditfun:function(){this.stopBtn=!0,this.edit(this.currentobject)},cancleEditfun:function(){Object.assign(this.currentobject,this.opjectBeforeEdit),this.createModal=!1,this.loading=!1,this.currentobject={},this.editModal=!1,this.stopBtn=!1},showCreateModal:function(){this.modelTitle="generic.creatItemTitle",this.modelOktext="modal.create",this.createModal=!0,this.loading=!0},okCreatefun:function(){this.stopBtn=!0,this.create()},cancleCreatefun:function(){this.createModal=!1,this.loading=!1,this.currentobject={},this.stopBtn=!1}}},f=d,m=(n("79b0"),n("2877")),p=Object(m["a"])(f,i,r,!1,null,null,null),h=p.exports,g={name:"StaticRoads",components:{productsTable:h},data:function(){return{}}},v=g,b=(n("0d66"),Object(m["a"])(v,a,o,!1,null,null,null));e["default"]=b.exports},"5e91":function(t,e,n){},"646b":function(t,e,n){"use strict";var a=n("c427");function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function r(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}var l=function(){function t(){o(this,t)}return r(t,[{key:"riquierdvalidation",value:function(t){return null==t||""===t}},{key:"numircvalidation",value:function(t){return!!isNaN(t)||(isNaN(t),!1)}},{key:"numircriquierdvalidation",value:function(t){return!!isNaN(t)||!(!isNaN(t)&&null!=t&&""!==t)}},{key:"validateEmail",value:function(t){var e=/^(([^<>()[\]\\.,;:\s@\\"]+(\.[^<>()[\]\\.,;:\s@\\"]+)*)|(\\".+\\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return!e.test(t)}},{key:"validatePhone",value:function(t){var e=/^[\\+]?[(]?[0-9]{3}[)]?[-\s\\.]?[0-9]{3}[-\s\\.]?[0-9]{3,8}$/im;return!e.test(t)}},{key:"todayDate",value:function(){var t=new Date,e=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();return e}},{key:"currentDateTime",value:function(){var t=new Date;return t.toISOString()}},{key:"formatDate",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e){var n={weekday:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"};return new Date(t).toLocaleDateString("ar-EG",n)}var a={year:"numeric",month:"numeric",day:"numeric"};return new Date(t).toLocaleDateString("ar-EG",a)}},{key:"b64toBlob",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,a=arguments.length>3?arguments[3]:void 0,o=atob(t),i=[],r=0;r<o.length;r+=n){for(var l=o.slice(r,r+n),c=new Array(l.length),s=0;s<l.length;s++)c[s]=l.charCodeAt(s);var u=new Uint8Array(c);i.push(u)}var d=new Blob(i,{type:e}),f=document.createElement("a");f.href=window.URL.createObjectURL(d),f.download=a,f.click()}},{key:"printHtml",value:function(t,e){var n=window.open("","print","width=600,height=600");e&&(n.document.title=e),n.document.write(t),n.document.close(),n.focus(),n.print()}},{key:"openAndPrintInvoice",value:function(t,e){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null==a?(n=window.open(t+"Bill/PrintInvoice?inv_id="+e,"print"),n.focus()):(n=window.open(t+"Bill/PrintInvoice?inv_id="+e+"&WidthCm="+a,"print"),n.focus())}},{key:"openAndPrintHtml",value:function(t,e,n,o){var i=this;a["a"].get(a["a"].defaults.baseURL+t,{params:e}).then((function(t){i.printHtml(t.data,n+i.currentDateTime().toString())})).catch((function(t){401===t.response.status&&o.showToast(o.$t("generic.errorYouDonotHaveAccess"),{icon:"fa-exclamation",position:"bottom-center",duration:2500,type:"error"}),console.error(t),o.loading=!1,o.showToast(o.$t("generic.error"),{icon:"fa-exclamation",position:"bottom-center",duration:2500,type:"error"})}))}},{key:"downloadtableascsv",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",n=document.querySelectorAll("table#"+t+" tr"),a=[],o=0;o<n.length;o++){for(var i=[],r=n[o].querySelectorAll("td, th"),l=0;l<r.length;l++){var c=r[l].innerText.replace(/(\r\n|\n|\r)/gm,"").replace(/(\s\s)/gm," ");c=c.replace(/"/g,'""'),i.push('"'+c+'"')}a.push(i.join(e))}var s=a.join("\n"),u="export_"+t+"_"+(new Date).toLocaleDateString()+".csv",d=document.createElement("a");d.style.display="none",d.setAttribute("target","_blank"),d.setAttribute("href","data:text/csv;charset=utf-8,"+encodeURIComponent(s)),d.setAttribute("download",u),document.body.appendChild(d),d.click(),document.body.removeChild(d)}},{key:"base64ToArrayBuffer",value:function(t,e){for(var n=window.atob(t),a=n.length,o=new Uint8Array(a),i=0;i<a;i++){var r=n.charCodeAt(i);o[i]=r}var l=new Blob([o],{type:e}),c=URL.createObjectURL(l),s=window.open(c,"_blank ");s.focus(),s.print(),setTimeout((function(){s.focus(),s.print()}),2e3)}}]),t}();e["a"]=new l},"79b0":function(t,e,n){"use strict";n("1ee7")}}]);
//# sourceMappingURL=chunk-6a2c3717.3c6b1930.js.map