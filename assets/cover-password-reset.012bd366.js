import{d as O,L as X,u as Y,a as ee,r as g,o as se,K as ae,w as re,c as i,b as a,t as l,n as k,e as t,f as b,g as N,i as R,F as Q,h as x,_ as te,s as d}from"./index.433ec507.js";import{c as oe,u as K,A as L,r as C,e as ie,_ as le}from"./lodash.56960555.js";import{S as de}from"./AxiosClient.a377a822.js";/* empty css                                     */const ne={class:"flex justify-center md:justify-start min-h-screen items-center"},ue=a("div",{class:"sm:fixed rtl:left-0 ltr:right-0 top-0 bottom-0 sm:w-1/2 sm:hidden md:block"},[a("div",{class:"min-h-screen bg-cover hidden sm:block",style:{"background-image":"url(https://partners.wtheq.sa/company/section.jpg)"}})],-1),me={class:"md:w-1/2 p-10 sm:px-10 lg:p-28"},ce={class:"grid justify-items-center items-center"},pe=a("a",{href:"https://partners.wtheq.sa"},[a("img",{loading:"lazy",width:"150",src:te,alt:"\u0648\u062B\u0642"})],-1),he={class:"mt-6 text-lg sm:text-2xl font-bold text-gray-900"},we={class:"grid justify-items-center items-center"},ve={class:"mt-6 text-lg sm:text-2xl font-bold text-gray-900"},fe={class:"mt-4"},Pe={key:0,class:"mt-4"},ge={for:"email"},_e=a("span",{class:"text-red-500"},"*",-1),$e=["placeholder"],ye={key:0,class:"text-danger mt-1"},Fe={key:1,class:"text-danger mt-1"},Qe={key:1,class:"text-[#1abc9c] mt-1"},We={class:"mt-4"},ke={for:"password"},be=a("span",{class:"text-red-500"},"*",-1),Ne=["placeholder"],Re={key:0,class:"text-danger mt-1"},xe={key:1,class:"text-danger mt-1"},Ce={class:"mt-4"},Ve={for:"password"},Se=a("span",{class:"text-red-500"},"*",-1),qe=["placeholder"],De={key:0,class:"text-danger mt-1"},je={key:1,class:"text-danger mt-1"},Be={class:"flex items-center justify-end mt-4"},Ue=O({__name:"cover-password-reset",setup(Ae){X();const{t:W}=Y();ee({title:"Reset Password Cover"});const o=g({email:"",password:"",confirmPassword:"",token:""}),F=g({email:""}),n=g({password:[],confirmPassword:[]}),p=g({email:[]}),h=g(!1),u=g(!1),$=g(!1);let _;const Z=oe.regex(/^(?=.*\d)(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z]).{8,}$/),G={resetPasswordFormWithQueries:{password:{required:C,passwordValidation:Z},confirmPassword:{required:C,passwordConfirm:s=>o.value.password===o.value.confirmPassword}}},H={resetPasswordFormWithNoQueries:{email:{required:C,email:ie}}},c=K(G,{resetPasswordFormWithQueries:o}),P=K(H,{resetPasswordFormWithNoQueries:F});se(()=>{_=ae().currentRoute.value,_.query.token&&_.query.email?($.value=!0,o.value.email=_.query.email,o.value.token=_.query.token):$.value=!1}),re(()=>le.cloneDeep(o.value),()=>{u.value=!1,h.value=!1});const J=async()=>{if(u.value=!0,h.value=!0,$.value){if(c.value.resetPasswordFormWithQueries.$touch(),c.value.resetPasswordFormWithQueries.$invalid)return console.log(c.value.resetPasswordFormWithQueries),m(W("errors.someEnteredDataNotCorrect"),"error"),!1;n.value={password:[],confirmPassword:[]}}else{if(P.value.resetPasswordFormWithNoQueries.$touch(),P.value.resetPasswordFormWithNoQueries.$invalid)return m(W("errors.someEnteredDataNotCorrect"),"error"),!1;p.value={email:[]}}let s=new FormData;$.value?(s.append("email",o.value.email),s.append("token",_.query.token),s.append("password",o.value.password),s.append("password_confirmation",o.value.password),L.ResetPasswordWithQueries(s).then(e=>{var r;(e==null?void 0:e.status)===200?m(e.data.message,"success"):((r=e==null?void 0:e.response)==null?void 0:r.status)>400?(n.value=e.data.errors,m(e.response.data.message,"error")):(e==null?void 0:e.status)>400?(n.value=e.data.errors,m(e.data.message,"error")):m(e,"error")}).catch(e=>{var r,w,v,f;n.value=(w=(r=e.response)==null?void 0:r.data)==null?void 0:w.errors,m((f=(v=e.response)==null?void 0:v.data)==null?void 0:f.message,"error")})):(s.append("email",F.value.email),L.ResetPasswordNoQueries(s).then(e=>{var r;(e==null?void 0:e.status)===200?m(e.data.message,"success"):((r=e==null?void 0:e.response)==null?void 0:r.status)>400?(p.value=e.data.errors,m(e.response.data.message,"error")):(e==null?void 0:e.status)>400?(p.value=e.data.errors,m(e.data.message,"error")):m(e,"error")}).catch(e=>{var r,w,v,f;p.value=(w=(r=e.response)==null?void 0:r.data)==null?void 0:w.errors,m((f=(v=e.response)==null?void 0:v.data)==null?void 0:f.message,"error")}))},m=(s="",e="success")=>{de.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:5e3,customClass:{container:"toast"}}).fire({icon:e,title:s,padding:"10px 20px"})};return(s,e)=>{var r,w,v,f,V,S,q,D,j,B,A,M,z,E,I,T,U;return d(),i("div",ne,[ue,a("div",me,[a("div",ce,[pe,a("h2",he,l(s.$t("RegisterForm.companyInstitution")),1)]),a("div",we,[a("h2",ve,l(s.$t("ResetPassword.ResetPassword")),1)]),a("div",fe,[a("form",null,[$.value?(d(),i(Q,{key:1},[a("div",We,[a("div",{class:k({"has-error":u.value&&t(c).resetPasswordFormWithQueries.password.$error||u.value&&((V=(f=n.value)==null?void 0:f.password)==null?void 0:V.length)>0,"has-success":u.value&&!t(c).resetPasswordFormWithQueries.password.$error})},[a("label",ke,[b(l(s.$t("fields.password"))+" ",1),be]),N(a("input",{id:"password",type:"password",placeholder:s.$t("fields.enterFieldValue",{name:s.$t("fields.password")}),class:"form-input","onUpdate:modelValue":e[1]||(e[1]=y=>o.value.password=y)},null,8,Ne),[[R,o.value.password]]),u.value&&t(c).resetPasswordFormWithQueries.password.$error||u.value&&((q=(S=n.value)==null?void 0:S.password)==null?void 0:q.length)>0?(d(),i(Q,{key:0},[((j=(D=n.value)==null?void 0:D.password)==null?void 0:j.length)>0?(d(),i("p",Re,l((B=n.value)==null?void 0:B.password[0]),1)):(d(),i("p",xe,l(s.$t("errors."+t(c).resetPasswordFormWithQueries.password.$errors[0].$validator.toString(),{name:s.$t("fields.password")})),1))],64)):x("",!0)],2)]),a("div",Ce,[a("div",{class:k({"has-error":u.value&&t(c).resetPasswordFormWithQueries.confirmPassword.$error||u.value&&((M=(A=n.value)==null?void 0:A.confirmPassword)==null?void 0:M.length)>0,"has-success":u.value&&!t(c).resetPasswordFormWithQueries.confirmPassword.$error})},[a("label",Ve,[b(l(s.$t("fields.confirmPassword"))+" ",1),Se]),N(a("input",{id:"confirmPassword",type:"password",placeholder:s.$t("fields.enterFieldValue",{name:s.$t("fields.confirmPassword")}),class:"form-input","onUpdate:modelValue":e[2]||(e[2]=y=>o.value.confirmPassword=y)},null,8,qe),[[R,o.value.confirmPassword]]),u.value&&t(c).resetPasswordFormWithQueries.confirmPassword.$error||u.value&&((E=(z=n.value)==null?void 0:z.confirmPassword)==null?void 0:E.length)>0?(d(),i(Q,{key:0},[((T=(I=n.value)==null?void 0:I.confirmPassword)==null?void 0:T.length)>0?(d(),i("p",De,l((U=n.value)==null?void 0:U.confirmPassword[0]),1)):(d(),i("p",je,l(s.$t("errors."+t(c).resetPasswordFormWithQueries.confirmPassword.$errors[0].$validator.toString(),{name:s.$t("fields.confirmPassword")})),1))],64)):x("",!0)],2)])],64)):(d(),i("div",Pe,[a("div",{class:k({"has-error":h.value&&t(P).resetPasswordFormWithNoQueries.email.$error||h.value&&((r=p.value.email)==null?void 0:r.length)>0,"has-success":h.value&&!t(P).resetPasswordFormWithNoQueries.email.$error})},[a("label",ge,[b(l(s.$t("fields.email"))+" ",1),_e]),N(a("input",{id:"email",type:"email",placeholder:s.$t("fields.enterFieldValue",{name:s.$t("fields.email")}),autocomplete:"email",class:"form-input","onUpdate:modelValue":e[0]||(e[0]=y=>F.value.email=y)},null,8,$e),[[R,F.value.email]]),h.value&&t(P).resetPasswordFormWithNoQueries.email.$error||h.value&&((w=p.value.email)==null?void 0:w.length)>0?(d(),i(Q,{key:0},[((v=p.value.email)==null?void 0:v.length)>0?(d(),i("p",ye,l(p.value.email[0]),1)):(d(),i("p",Fe,l(s.$t("errors."+t(P).resetPasswordFormWithNoQueries.email.$errors[0].$message.toString(),{name:s.$t("fields.email")})),1))],64)):h.value&&!t(P).resetPasswordFormWithNoQueries.email.$error?(d(),i("p",Qe,l(s.$t("success.doneInput")),1)):x("",!0)],2)])),a("div",Be,[a("button",{type:"button",onClick:J,class:"btn btn-primary !mt-6 w-full"},l(t(W)("ResetPassword.ResetPassword")),1)])])])])])}}});export{Ue as default};
